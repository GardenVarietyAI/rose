(()=>{var G=()=>({disabled:!1,label:"Ask",async ask(){let e=this.$el.closest("form")?.querySelector('[name="q"]:not([disabled])')?.value?.trim()||"";if(!(!e||this.disabled)){this.disabled=!0;try{let r=this.$el.closest("form")?.querySelector('select[name="lens_id"]')?.value?.trim()||"",a=await(await fetch("/v1/ask",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:e,lens_id:r||void 0})})).json();if(!a?.thread_id)throw new Error("Missing thread_id");let l=r?`?lens_id=${encodeURIComponent(r)}`:"";window.location.href="/v1/threads/"+a.thread_id+l}catch(t){alert("Error: "+(t?.message||String(t)))}finally{this.disabled=!1}}}});var X=()=>({uuid:null,accepted:!1,collapsed:!1,expanded:!1,editing:!1,draft:"",original:"",editable:!1,saving:!1,init(){this.uuid=this.$el.dataset.uuid,this.accepted=this.$el.classList.contains("accepted");let e=this.$refs?.sourceContent;this.editable=!!e;let t=this.$el.querySelector(".message-content");if(t&&!this.editable){let r=t.textContent?.trim()||"";t.innerHTML=this.$markdown(r)}if(!this.editable)return;let n=e.content?.textContent;this.original=(n??t?.innerText??"").trimEnd(),this.draft=this.original},startEdit(){this.editable&&(this.editing=!0,this.draft=this.original,this.$nextTick(()=>this.$refs?.editor?.focus()))},cancelEdit(){this.editable&&(this.editing=!1,this.draft=this.original)},async saveEdit(){if(!(!this.editable||this.saving)){this.saving=!0;try{let e=await fetch(`/v1/messages/${this.uuid}/revisions`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({content:this.draft})});if(!e.ok)throw new Error(`HTTP ${e.status}`);window.location.reload()}catch(e){console.error("Error:",e),this.saving=!1}}},async toggleAccepted(){try{let e=await fetch(`/v1/messages/${this.uuid}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({accepted:!this.accepted})});if(!e.ok)throw new Error(`HTTP ${e.status}`);this.accepted=!this.accepted}catch(e){console.error("Error:",e)}}});function _(e){let t=[];for(let n of e)if(n.type==="text")if(t.length>0&&t[t.length-1].type==="text"){let r=t[t.length-1];r.value+=n.value}else t.push({type:"text",value:n.value});else t.push(n);return(t.length===0||t[t.length-1].type!=="text")&&t.push({type:"text",value:""}),t}function H(e){let t=[];for(let n of e)n.type==="text"&&n.value&&t.push(n.value);return t.join("")}function D(e,t=[]){let n=[];for(let r of t)n.push({type:"lens",lensId:r.lensId,atName:r.atName});return e&&n.push({type:"text",value:e}),_(n)}function I(e,t){let n=Math.max(0,Math.min(t.tokenIndex,e.length-1)),r=e[n],s=r.type==="text"?r.value.length:0,a=Math.max(0,Math.min(t.offset,s));return{tokenIndex:n,offset:a}}function V(e,t){let{tokens:n,caret:r}=e;if(t.type==="insertText"){let{at:s,text:a}=t,l=[...n],p=l[s.tokenIndex];if(p.type!=="text")throw new Error("Cannot insert text into non-text token");let o=p.value.slice(0,s.offset),i=p.value.slice(s.offset);l[s.tokenIndex]={type:"text",value:o+a+i};let u=_(l),m={tokenIndex:s.tokenIndex,offset:s.offset+a.length},h=I(u,m),g={type:"deleteRange",from:s,to:{tokenIndex:s.tokenIndex,offset:s.offset+a.length}};return{buffer:{tokens:u,caret:h},inverse:g}}if(t.type==="deleteRange"){let{from:s,to:a}=t,l=[...n],p=[];if(s.tokenIndex===a.tokenIndex){let c=l[s.tokenIndex];if(c.type!=="text")throw new Error("Cannot delete from non-text token");let d=c.value.slice(0,s.offset),x=c.value.slice(s.offset,a.offset),k=c.value.slice(a.offset);l[s.tokenIndex]={type:"text",value:d+k};let $=_(l),w={tokenIndex:s.tokenIndex,offset:s.offset},q=I($,w);return{buffer:{tokens:$,caret:q},inverse:{type:"insertText",at:s,text:x}}}let o=l[s.tokenIndex],i=l[a.tokenIndex];if(o.type!=="text"||i.type!=="text")throw new Error("Cross-token delete requires text tokens at boundaries");let u=o.value.slice(0,s.offset),m=o.value.slice(s.offset),h=i.value.slice(0,a.offset),g=i.value.slice(a.offset);for(let c=s.tokenIndex;c<=a.tokenIndex;c++)p.push(l[c]);p[0]={type:"text",value:m},p[p.length-1]={type:"text",value:h};let v=[];for(let c=0;c<p.length;c++){let d=p[c];if(d.type==="text")if(v.length>0&&v[v.length-1].type==="text"){let x=v[v.length-1];v[v.length-1]={type:"text",value:x.value+d.value}}else v.push(d);else v.push(d)}for(let c=a.tokenIndex;c>=s.tokenIndex;c--)l.splice(c,1);l.splice(s.tokenIndex,0,{type:"text",value:u+g});let y=_(l),b={tokenIndex:s.tokenIndex,offset:s.offset},E=I(y,b);return{buffer:{tokens:y,caret:E},inverse:{type:"insertTokens",at:s,tokens:v}}}if(t.type==="replaceToken"){let{index:s,token:a}=t,l=[...n],p=l[s];l[s]=a;let o=_(l),i=I(o,r);return{buffer:{tokens:o,caret:i},inverse:{type:"replaceToken",index:s,token:p}}}if(t.type==="insertTokens"){let{at:s,tokens:a}=t,l=[...n],p=l[s.tokenIndex];if(p.type!=="text")throw new Error("Cannot insert tokens into non-text token");let o=p.value.slice(0,s.offset),i=p.value.slice(s.offset),u=[...a];if(u.length>0){let f=u[0];f.type==="text"?u[0]={type:"text",value:o+f.value}:o&&u.unshift({type:"text",value:o});let c=u[u.length-1];c.type==="text"?u[u.length-1]={type:"text",value:c.value+i}:i&&u.push({type:"text",value:i})}else u.push({type:"text",value:o+i});l.splice(s.tokenIndex,1,...u);let m=_(l),h=a[a.length-1],g=0,v=0;if(h&&h.type!=="text"){let f=0;for(let w=0;w<s.tokenIndex;w++){let q=n[w];q.type==="text"&&(f+=q.value.length)}f+=s.offset;let c=f;for(let w of a)w.type==="text"&&(c+=w.value.length);let d=0;for(let w of a)w.type!=="text"&&d++;let x=0,k=0,$=!1;for(let w=0;w<m.length;w++){let q=m[w];if(q.type==="text"){if(!$&&x>=f&&($=!0),c<=x+q.value.length){g=w,v=c-x;break}x+=q.value.length}else if($&&(k++,k===d)){g=w+1,v=0;break}}}else{let f=o.length;for(let d of a)d.type==="text"&&(f+=d.value.length);let c=0;for(let d=0;d<m.length;d++){let x=m[d];if(x.type==="text"){if(f<=c+x.value.length){g=d,v=f-c;break}c+=x.value.length}}}let b=I(m,{tokenIndex:g,offset:v});return{buffer:{tokens:m,caret:b},inverse:{type:"deleteRange",from:s,to:b}}}throw new Error(`Unknown op type: ${t.type}`)}function M(e){let t=document.createElement("div");return t.textContent=e||"",t.textContent||""}function U(e,t){t.textContent="";let n=new Map,r=0;for(let s=0;s<e.length;s++){let a=e[s];if(a.type==="lens"){let l=document.createElement("span");l.setAttribute("x-data",`lensToken('${a.lensId}', '${a.atName}')`),l.setAttribute("x-on:click","removeLens()"),l.setAttribute("data-token","lens"),t.appendChild(l),n.set(s,{node:l,textStart:r,textEnd:r})}else if(a.type==="text"){let l=document.createTextNode(M(a.value));t.appendChild(l),n.set(s,{node:l,textStart:r,textEnd:r+a.value.length}),r+=a.value.length}}return n}function W(e,t,n){let r=t.get(e.tokenIndex);if(!r)return null;if(r.node.nodeType===Node.TEXT_NODE)return{node:r.node,offset:e.offset};if(e.offset===0)return{node:n,offset:Array.from(n.childNodes).indexOf(r.node)};let s=e.tokenIndex+1,a=t.get(s);return a?{node:n,offset:Array.from(n.childNodes).indexOf(a.node)}:{node:n,offset:n.childNodes.length}}function R(e,t,n,r){for(let[s,a]of n.entries())if(a.node===e)return e.nodeType===Node.TEXT_NODE?{tokenIndex:s,offset:Math.min(t,a.textEnd-a.textStart)}:{tokenIndex:s,offset:0};if(e===r){let s=Array.from(r.childNodes);if(t>=s.length){let l=n.size-1,p=n.get(l);return p&&p.node.nodeType===Node.TEXT_NODE?{tokenIndex:l,offset:p.textEnd-p.textStart}:{tokenIndex:l,offset:0}}let a=s[t];for(let[l,p]of n.entries())if(p.node===a)return{tokenIndex:l,offset:0}}return{tokenIndex:n.size-1,offset:0}}var pe=/(?:^|[^A-Za-z0-9-])@([A-Za-z0-9-]*)/g;function Z(e,t){let n="",r=[],s=0,a=-1;for(let h=0;h<e.length;h++){let g=e[h];if(g.type==="text"){let v=n.length;n+=g.value,r.push({tokenIndex:h,startChar:v,endChar:n.length}),h<t.tokenIndex?s+=g.value.length:h===t.tokenIndex&&(s+=t.offset,a=r.length-1)}else r.push({tokenIndex:h,startChar:n.length,endChar:n.length}),h<t.tokenIndex&&(a=r.length-1)}if(a===-1||n.length===0)return null;let l=n.slice(0,s),p=Array.from(l.matchAll(pe));if(p.length===0)return null;let o=p[p.length-1],i=o[0].startsWith("@")?0:1,u=o.index+i,m=u+o[0].length-i;if(m!==s)return null;for(let h of r)if(u>=h.startChar&&u<h.endChar)return m>h.endChar?null:{tokenIndex:h.tokenIndex,startOffset:u-h.startChar,endOffset:m-h.startChar,query:o[1].toLowerCase(),raw:o[0].slice(i)};return null}function K(e){let t=e,n={tokens:D(""),caret:{tokenIndex:0,offset:0}},r=null,s=!1,a=()=>{if(!t||!r||document.activeElement!==t)return;let i=W(n.caret,r,t);if(!i)return;let u=window.getSelection();if(!u)return;let m=document.createRange();m.setStart(i.node,i.offset),m.collapse(!0),u.removeAllRanges(),u.addRange(m)},l=()=>{if(!t||!r)return;let i=window.getSelection();if(!i||!i.rangeCount)return;let u=i.getRangeAt(0);n.caret=R(u.startContainer,u.startOffset,r,t)},p=()=>{if(!t)return;let i=[],u=new Map,m=0,h=0,g=!1;for(let f of t.childNodes){if(f.nodeType===Node.ELEMENT_NODE&&f.dataset?.token==="lens"){i.push({type:"lens",lensId:f.dataset.lensId,atName:f.dataset.atName}),u.set(h++,{node:f,textStart:m,textEnd:m});continue}if(f.nodeType===Node.TEXT_NODE){let c=f.textContent||"";i.push({type:"text",value:c}),u.set(h++,{node:f,textStart:m,textEnd:m+c.length}),m+=c.length;continue}f.nodeType===Node.ELEMENT_NODE&&f.tagName==="BR"&&(g=!0)}let v=i.some((f,c)=>f.type==="text"&&c>0&&i[c-1].type==="text"),y=i.length>0&&i[i.length-1].type==="lens";(v||y||g)&&(g=!0);let b=n.caret,E=window.getSelection();if(E&&E.rangeCount){let f=E.getRangeAt(0);b=R(f.startContainer,f.startOffset,u,t)}if(g){let f=_(i);b=I(f,b),n={tokens:f,caret:b},o()}else{let f=_(i);b=I(f,b),n={tokens:f,caret:b},r=u}},o=()=>{if(!(!t||s)){s=!0;try{r=U(n.tokens,t),a(),window.Alpine&&window.Alpine.initTree(t)}finally{s=!1}}};return{getBuffer(){return n},setBuffer(i){n=i,o()},loadFromQuery(i,u){let m=[];u?.lensId&&u?.atName&&m.push({lensId:u.lensId,atName:u.atName});let h=D(i,m),g=h.length-1,v=h[g];n={tokens:h,caret:{tokenIndex:g,offset:v?.type==="text"?v.value.length:0}},o()},syncFromDOM(){p()},syncBufferOnly(){if(!t)return;let i=[],u=new Map,m=0,h=0;for(let f of t.childNodes)if(f.nodeType===Node.ELEMENT_NODE&&f.dataset?.token==="lens")i.push({type:"lens",lensId:f.dataset.lensId,atName:f.dataset.atName}),u.set(h++,{node:f,textStart:m,textEnd:m});else if(f.nodeType===Node.TEXT_NODE){let c=f.textContent||"";i.push({type:"text",value:c}),u.set(h++,{node:f,textStart:m,textEnd:m+c.length}),m+=c.length}i.length===0&&(i.push({type:"text",value:""}),u.set(0,{node:null,textStart:0,textEnd:0}));let g=window.getSelection(),v={tokenIndex:0,offset:0};if(g&&g.rangeCount){let f=g.getRangeAt(0);v=R(f.startContainer,f.startOffset,u,t)}let y=i.length-1;v.tokenIndex=Math.max(0,Math.min(v.tokenIndex,y));let b=i[v.tokenIndex],E=b?.type==="text"?b.value.length:0;v.offset=Math.max(0,Math.min(v.offset,E)),n={tokens:i,caret:v},r=u},serialize(){return H(n.tokens)},detectMention(){return Z(n.tokens,n.caret)},insertLensToken(i,u,m){if(!t)return;let h=window.getSelection();if(!h||!h.rangeCount)return;let g=r.get(i.tokenIndex);if(!g||!g.node)return;let v=g.node,y=v.textContent||"",b=y.slice(0,i.startOffset),E=y.slice(i.endOffset),f=document.createElement("span");f.setAttribute("x-data",`lensToken('${u}', '${m}')`),f.setAttribute("x-on:click","removeLens()"),f.setAttribute("data-token","lens");let c=v.parentNode;if(!c)return;if(b){let k=document.createTextNode(b);c.insertBefore(k,v)}if(c.insertBefore(f,v),E){let k=document.createTextNode(E);c.insertBefore(k,v)}else{let k=document.createTextNode(" ");c.insertBefore(k,v)}c.removeChild(v),window.Alpine&&window.Alpine.initTree(f);let d=document.createRange(),x=f.nextSibling;x&&x.nodeType===Node.TEXT_NODE&&(d.setStart(x,0),d.collapse(!0),h.removeAllRanges(),h.addRange(d)),this.syncBufferOnly()},applyOperation(i){l();let u=V(n,i);return n=u.buffer,o(),u.inverse},removeLens(i){if(!t)return;let u=t.querySelector(`[data-token="lens"][data-lens-id="${i}"]`);!u||!u.parentNode||(u.parentNode.removeChild(u),this.syncBufferOnly())},placeCaretAtEnd(){if(!t)return;let i=window.getSelection();if(!i)return;let u=t.lastChild;if(!u)return;let m=document.createRange();u.nodeType===Node.TEXT_NODE?m.setStart(u,u.textContent?.length||0):m.setStartAfter(u),m.collapse(!0),i.removeAllRanges(),i.addRange(m),this.syncBufferOnly()},onInput(i){t&&t.addEventListener("input",()=>{l(),i()})},destroy(){r=null}}}var Q=()=>({queryValue:"",settingsOpen:!1,submitting:!1,mentionOpen:!1,mentionIndex:0,mentionQuery:"",mentionOptions:[],lensOptions:[],idToAtName:{},errorMessage:"",controller:null,showError(e){this.errorMessage=e,setTimeout(()=>this.errorMessage="",5e3)},init(){let e=this.$store.search.query||"",t=this.$store.search.lens_map||{};this.queryValue=e.replace(/^@\S+\s*/,""),this.buildLensState(t),this.controller=K(this.$refs?.editor),this.$watch("queryValue",n=>{this.$store.search.query=n}),this.$watch("$store.search.lens_id",(n,r)=>{let s=this.$refs?.lensSelect;s&&(s.value=n),r!==void 0&&this.controller.removeLens(r),this.syncFromStore(),r!==void 0&&this.controller&&document.activeElement===this.$refs?.editor&&this.controller.placeCaretAtEnd()}),this.$nextTick(()=>{this.syncFromStore(),e||this.$refs?.editor?.focus()})},syncFromStore(){if(!this.controller)return;this.controller.loadFromQuery(this.queryValue,this.getSelectedLens());let e=this.$refs?.textarea;e&&(e.value=this.queryValue)},syncToStore(){if(!this.controller)throw new Error("Buffer controller not initialized");this.controller.syncBufferOnly();let e=this.controller.serialize();if(e!==this.queryValue){this.queryValue=e;let t=this.$refs?.textarea;t&&(t.value=e)}this.updateMentionState()},updateMentionState(){if(!this.controller)return;let e=this.controller.detectMention();if(!e){this.mentionOpen=!1,this.mentionQuery="",this.mentionOptions=this.lensOptions,this.mentionIndex=0;return}let t=e.query,n=this.lensOptions.filter(s=>s.atName.startsWith(t)),r=this.mentionOpen&&this.mentionQuery===t;this.mentionOpen=n.length>0,this.mentionQuery=t,this.mentionOptions=n,this.mentionIndex=r?Math.min(this.mentionIndex,Math.max(n.length-1,0)):0},buildLensState(e){let t=Object.entries(e).map(([r,s])=>({lensId:s,atName:r.toLowerCase()})).filter(r=>r.atName),n=Object.fromEntries(Object.entries(e).map(([r,s])=>[s,r]));this.lensOptions=t,this.mentionOptions=t,this.idToAtName=n},getSelectedLens(){let e=this.$store.search.lens_id||"";if(!e)return null;let t=this.idToAtName[e]||"";return{lensId:e,atName:t}},selectMention(){if(!this.controller||!this.mentionOpen||!this.mentionOptions.length)return;let e=this.controller.detectMention();if(!e)return;let t=this.mentionOptions[this.mentionIndex];t&&(this.controller.insertLensToken(e,t.lensId,t.atName),this.$store.search.lens_id=t.lensId,this.queryValue=this.controller.serialize(),this.mentionOpen=!1,this.mentionQuery="",this.mentionOptions=this.lensOptions,this.mentionIndex=0)},handleEditorKeydown(e){if(!this.mentionOpen){e.key==="Enter"&&(e.preventDefault(),this.submit());return}if(e.key==="ArrowDown"){e.preventDefault();let t=Math.max(this.mentionOptions.length-1,0);this.mentionIndex=Math.min(this.mentionIndex+1,t);return}if(e.key==="ArrowUp"){e.preventDefault(),this.mentionIndex=Math.max(this.mentionIndex-1,0);return}if(e.key==="Enter"||e.key===" "){e.preventDefault(),this.selectMention();return}e.key==="Escape"&&(e.preventDefault(),this.mentionOpen=!1,this.mentionQuery="",this.mentionOptions=this.lensOptions,this.mentionIndex=0)},async submit(){if(this.submitting)return;let e=this.$refs?.form;if(!e)throw new Error("Form ref not found");this.submitting=!0;try{let n=this.$refs?.lensSelect?.value?.trim()||this.$store.search.lens_id||"",r=this.queryValue.trim(),s=Number(this.$store.search.limit);if(!s||s<1)throw new Error("Invalid search limit");let a={q:r,exact:!!this.$store.search.exact,limit:s,lens_id:n||void 0},l=await fetch("/v1/search/fragment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!l.ok)throw new Error(`Search failed (HTTP ${l.status})`);let p=await l.text(),o=document.querySelector("#search-root");if(!o)throw new Error("Page missing #search-root element");o.outerHTML=p;let i=new URLSearchParams;a.q&&i.set("q",a.q),a.exact&&i.set("exact","true"),a.limit&&i.set("limit",String(a.limit)),a.lens_id&&i.set("lens_id",a.lens_id);let u=i.toString()?`${e.action}?${i.toString()}`:e.action;window.history.replaceState({},"",u)}catch(t){let n=t instanceof Error?t.message:String(t);this.showError(`Search failed: ${n}`)}finally{this.submitting=!1}}});var Y=(e,t)=>({lensId:e,rawAtName:t,init(){if(!this.lensId||!this.rawAtName)throw new Error("lensId and rawAtName are required");this.render()},render(){let n=this.$el,r=M(this.rawAtName.toLowerCase());n.className="query-token",n.dataset.token="lens",n.dataset.lensId=this.lensId,n.dataset.atName=r,n.textContent=`@${r}`,n.setAttribute("contenteditable","false"),n.style.cursor="pointer"},removeLens(){this.$store.search.clearLens()}});var z,de,fe,he;function te(e){return{lang:e?.lang??z?.lang,message:e?.message,abortEarly:e?.abortEarly??z?.abortEarly,abortPipeEarly:e?.abortPipeEarly??z?.abortPipeEarly}}function ye(e){return de?.get(e)}function me(e){return fe?.get(e)}function ve(e,t){return he?.get(e)?.get(t)}function ne(e){let t=typeof e;return t==="string"?`"${e}"`:t==="number"||t==="bigint"||t==="boolean"?`${e}`:t==="object"||t==="function"?(e&&Object.getPrototypeOf(e)?.constructor?.name)??"null":t}function O(e,t,n,r,s){let a=s&&"input"in s?s.input:n.value,l=s?.expected??e.expects??null,p=s?.received??ne(a),o={kind:e.kind,type:e.type,input:a,expected:l,received:p,message:`Invalid ${t}: ${l?`Expected ${l} but r`:"R"}eceived ${p}`,requirement:e.requirement,path:s?.path,issues:s?.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},i=e.kind==="schema",u=s?.message??e.message??ve(e.reference,o.lang)??(i?me(o.lang):null)??r.message??ye(o.lang);u!==void 0&&(o.message=typeof u=="function"?u(o):u),i&&(n.typed=!1),n.issues?n.issues.push(o):n.issues=[o]}function S(e){return{version:1,vendor:"valibot",validate:t=>e["~run"]({value:t},te())}}function ge(e,t){let n=[...new Set(e)];return n.length>1?`(${n.join(` ${t} `)})`:n[0]??"never"}var ke=/^\d{4}-(?:0[1-9]|1[0-2])-(?:[12]\d|0[1-9]|3[01])[T ](?:0\d|1\d|2[0-3])(?::[0-5]\d){2}(?:\.\d{1,9})?(?:Z|[+-](?:0\d|1\d|2[0-3])(?::?[0-5]\d)?)$/u;function F(e){return{kind:"validation",type:"iso_timestamp",reference:F,async:!1,expects:null,requirement:ke,message:e,"~run"(t,n){return t.typed&&!this.requirement.test(t.value)&&O(this,"timestamp",t,n),t}}}function xe(e,t,n){return typeof e.fallback=="function"?e.fallback(t,n):e.fallback}function se(e,t,n){return typeof e.default=="function"?e.default(t,n):e.default}function B(e,t){return{kind:"schema",type:"array",reference:B,expects:"Array",async:!1,item:e,message:t,get"~standard"(){return S(this)},"~run"(n,r){let s=n.value;if(Array.isArray(s)){n.typed=!0,n.value=[];for(let a=0;a<s.length;a++){let l=s[a],p=this.item["~run"]({value:l},r);if(p.issues){let o={type:"array",origin:"value",input:s,key:a,value:l};for(let i of p.issues)i.path?i.path.unshift(o):i.path=[o],n.issues?.push(i);if(n.issues||(n.issues=p.issues),r.abortEarly){n.typed=!1;break}}p.typed||(n.typed=!1),n.value.push(p.value)}}else O(this,"type",n,r);return n}}}function P(e,t){return{kind:"schema",type:"literal",reference:P,expects:ne(e),async:!1,literal:e,message:t,get"~standard"(){return S(this)},"~run"(n,r){return n.value===this.literal?n.typed=!0:O(this,"type",n,r),n}}}function j(e,t){return{kind:"schema",type:"object",reference:j,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return S(this)},"~run"(n,r){let s=n.value;if(s&&typeof s=="object"){n.typed=!0,n.value={};for(let a in this.entries){let l=this.entries[a];if(a in s||(l.type==="exact_optional"||l.type==="optional"||l.type==="nullish")&&l.default!==void 0){let p=a in s?s[a]:se(l),o=l["~run"]({value:p},r);if(o.issues){let i={type:"object",origin:"value",input:s,key:a,value:p};for(let u of o.issues)u.path?u.path.unshift(i):u.path=[i],n.issues?.push(u);if(n.issues||(n.issues=o.issues),r.abortEarly){n.typed=!1;break}}o.typed||(n.typed=!1),n.value[a]=o.value}else if(l.fallback!==void 0)n.value[a]=xe(l);else if(l.type!=="exact_optional"&&l.type!=="optional"&&l.type!=="nullish"&&(O(this,"key",n,r,{input:void 0,expected:`"${a}"`,path:[{type:"object",origin:"key",input:s,key:a,value:s[a]}]}),r.abortEarly))break}}else O(this,"type",n,r);return n}}}function N(e,t){return{kind:"schema",type:"optional",reference:N,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return S(this)},"~run"(n,r){return n.value===void 0&&(this.default!==void 0&&(n.value=se(this,n,r)),n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,r)}}}function T(e){return{kind:"schema",type:"string",reference:T,expects:"string",async:!1,message:e,get"~standard"(){return S(this)},"~run"(t,n){return typeof t.value=="string"?t.typed=!0:O(this,"type",t,n),t}}}function ee(e){let t;if(e)for(let n of e)t?t.push(...n.issues):t=n.issues;return t}function L(e,t){return{kind:"schema",type:"union",reference:L,expects:ge(e.map(n=>n.expects),"|"),async:!1,options:e,message:t,get"~standard"(){return S(this)},"~run"(n,r){let s,a,l;for(let p of this.options){let o=p["~run"]({value:n.value},r);if(o.typed){if(!o.issues){s=o;break}a?a.push(o):a=[o]}else l?l.push(o):l=[o]}if(s)return s;if(a){if(a.length===1)return a[0];O(this,"type",n,r,{issues:ee(a)}),n.typed=!0}else{if(l?.length===1)return l[0];O(this,"type",n,r,{issues:ee(l)})}return n}}}function re(...e){return{...e[0],pipe:e,get"~standard"(){return S(this)},"~run"(t,n){for(let r of e)if(r.kind!=="metadata"){if(t.issues&&(r.kind==="schema"||r.kind==="transformation")){t.typed=!1;break}t.issues&&(n.abortEarly||n.abortPipeEarly)||(t=r["~run"](t,n))}return t}}}function ie(e,t,n){let r=e["~run"]({value:t},te(n));return{typed:r.typed,success:!r.issues,output:r.value,issues:r.issues}}var Ee=j({role:T(),content:N(L([T(),B(j({type:N(T()),text:N(T())}))])),model:N(T())}),we=j({uuid:T(),type:L([P("user"),P("assistant")]),timestamp:re(T(),F()),sessionId:N(T()),message:Ee});function $e(e,t){let n=ie(we,e);return n.success?[]:n.issues.map(r=>{let s=r.path?.map(a=>a.key).join(".")||"record";return`Line ${t}: ${s} - ${r.message}`})}function _e(e){let t=e.trim().split(`
`),n=new Map,r=50,s={totalLines:t.length,parsed:0,skipped:0,errors:{invalidJSON:[],invalidType:0,missingMessage:0,missingRole:0,emptyContent:0,invalidTimestamp:[],validationErrors:[]}};t.forEach((p,o)=>{let i=o+1;if(!p.trim())return;let u;try{u=JSON.parse(p)}catch(b){s.errors.invalidJSON.length<r&&s.errors.invalidJSON.push(`Line ${i}: ${b.message}`),s.skipped++;return}let m=$e(u,i);if(m.length>0){let b=r-s.errors.validationErrors.length;b>0&&s.errors.validationErrors.push(...m.slice(0,b)),s.skipped++;return}if(u.type!=="user"&&u.type!=="assistant"){s.errors.invalidType++,s.skipped++;return}let h=u.message;if(!h||!h.role){s.errors.missingRole++,s.skipped++;return}let g=Array.isArray(h.content)?h.content.map(b=>b.type==="text"?b.text:"").join(`
`):h.content;if(!g||!g.trim()){s.errors.emptyContent++,s.skipped++;return}let v=u.sessionId||`generated_${u.uuid}`;n.has(v)||n.set(v,[]);let y=new Date(u.timestamp);n.get(v).push({uuid:u.uuid,role:h.role,content:g.trim(),model:h.model||null,created_at:Math.floor(y.getTime()/1e3),timestamp:u.timestamp,sessionId:v}),s.parsed++});let a=[];for(let p of n.values()){let o=null;for(let i of p)i.role==="user"?(o&&o.length>0&&a.push(o),o=[i]):i.role==="assistant"&&o&&o.push(i);o&&o.length>0&&a.push(o)}return{threads:a.map((p,o)=>({id:o,threadId:`import_${p[0].sessionId}_${p[0].uuid}`,userMessage:p[0],assistantMessages:p.slice(1),selected:!1})),report:s}}var ae={name:"Claude Code JSONL",fileExtension:".jsonl",parse:_e};var Te={"claude-code":ae},ue=()=>({preview:!1,importing:!1,complete:!1,threads:[],parseReport:null,selectedFormat:"claude-code",banner:{visible:!1,type:"",message:"",timeout:null},get currentValidator(){return Te[this.selectedFormat]},handleFormatChange(){this.threads=[],this.parseReport=null,this.preview=!1,this.closeBanner(),this.$refs.fileInput&&(this.$refs.fileInput.value="")},showBanner(e,t){this.banner.visible=!0,this.banner.type=e,this.banner.message=t,this.banner.timeout&&clearTimeout(this.banner.timeout),this.banner.timeout=setTimeout(()=>{this.banner.visible=!1},5e3)},closeBanner(){this.banner.visible=!1,this.banner.timeout&&clearTimeout(this.banner.timeout)},get selectedCount(){return this.threads.filter(e=>e.selected).length},get totalMessageCount(){return this.threads.filter(e=>e.selected).reduce((e,t)=>e+1+t.assistantMessages.length,0)},get parseReportSummary(){if(!this.parseReport)return"";let e=this.parseReport,t=[];if(t.push(`${e.parsed} records parsed`),e.skipped>0){let n=[];e.errors.invalidJSON.length>0&&n.push(`${e.errors.invalidJSON.length} invalid JSON`),e.errors.invalidType>0&&n.push(`${e.errors.invalidType} invalid type`),e.errors.emptyContent>0&&n.push(`${e.errors.emptyContent} empty content`),e.errors.invalidTimestamp.length>0&&n.push(`${e.errors.invalidTimestamp.length} invalid timestamp`),e.errors.validationErrors.length>0&&n.push(`${e.errors.validationErrors.length} validation errors`),t.push(`${e.skipped} skipped: ${n.join(", ")}`)}return t.join(", ")},handleFileSelect(e){let t=e.target.files?.[0];if(!t)return;let n=new FileReader;n.onload=r=>{try{let s=r.target.result,{threads:a,report:l}=this.currentValidator.parse(s);this.threads=a,this.parseReport=l,this.preview=!0,l.skipped>0&&this.showBanner("error",this.parseReportSummary)}catch(s){console.error("Parse error:",s),this.showBanner("error",`Failed to parse file: ${s.message}`)}},n.readAsText(t)},toggleAll(){let e=this.threads.every(t=>t.selected);this.threads.forEach(t=>t.selected=!e)},cancelImport(){this.preview=!1,this.threads=[],this.parseReport=null,this.closeBanner(),this.$refs.fileInput.value=""},async executeImport(){if(!(this.importing||this.selectedCount===0)){this.importing=!0;try{let e=[];for(let r of this.threads.filter(s=>s.selected)){e.push({uuid:r.userMessage.uuid,thread_id:r.threadId,role:r.userMessage.role,content:r.userMessage.content,model:r.userMessage.model,created_at:r.userMessage.created_at,meta:{session_id:r.userMessage.sessionId,original_timestamp:r.userMessage.timestamp}});for(let s of r.assistantMessages)e.push({uuid:s.uuid,thread_id:r.threadId,role:s.role,content:s.content,model:s.model,created_at:s.created_at,meta:{session_id:s.sessionId,original_timestamp:s.timestamp}})}let t=await fetch("/v1/import/messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:e})});if(!t.ok){let r=await t.json().catch(()=>({}));throw new Error(r.detail||`HTTP ${t.status}`)}let n=await t.json();this.preview=!1,this.complete=!0,this.showBanner("success",`Successfully imported ${n.imported} messages`)}catch(e){console.error("Import error:",e),this.showBanner("error",`Failed to import: ${e.message}`),this.importing=!1}}}});var oe=()=>({pending:!1,assistantEventSource:null,jobPollTimeout:null,jobPollAttempt:0,createPlaceholder(e){let t=this.$refs.placeholderTemplate.content.cloneNode(!0),n=t.querySelector(".message");return n.dataset.tempId=e,t},parseHtmlElement(e){let t=document.createElement("template");return t.innerHTML=String(e).trim(),t.content.firstElementChild},cleanupAssistantStream(){this.assistantEventSource&&this.assistantEventSource.close(),this.assistantEventSource=null},cleanupJobPoll(){this.jobPollTimeout&&clearTimeout(this.jobPollTimeout),this.jobPollTimeout=null,this.jobPollAttempt=0},async pollJobStatus(e,t){try{let n=await fetch(`/v1/threads/${e}/activity`,{headers:{Accept:"application/json"}});if(!n.ok)return;if((await n.json())?.job_events?.[0]?.status==="failed"){let l=this.$refs.responses.querySelector(`[data-temp-id="${t}"]`);l&&l.remove(),this.cleanupJobPoll();return}this.jobPollAttempt+=1;let a=Math.min(1e3*Math.pow(2,this.jobPollAttempt),3e4);this.jobPollTimeout=setTimeout(()=>this.pollJobStatus(e,t),a)}catch(n){console.error("Error polling job status:",n),this.jobPollAttempt+=1;let r=Math.min(1e3*Math.pow(2,this.jobPollAttempt),3e4);this.jobPollTimeout=setTimeout(()=>this.pollJobStatus(e,t),r)}},startEventStreams(e,t,{afterAssistantUuid:n=null}={}){if(this.assistantEventSource)return;let r=new URL(`/v1/threads/${e}/stream`,window.location.origin);r.searchParams.set("role","assistant"),n&&r.searchParams.set("after_uuid",n),this.assistantEventSource=new EventSource(r),this.assistantEventSource.addEventListener("assistant",async s=>{try{let l=JSON.parse(s?.data||"{}")?.uuid;if(!l)return;let p=await fetch(`/v1/messages/${l}/fragment`,{headers:{Accept:"text/html"}});if(!p.ok)return;let o=await p.text(),i=this.parseHtmlElement(o),u=this.$refs.responses.querySelector(`[data-temp-id="${t}"]`);u&&i&&u.replaceWith(i),this.cleanupJobPoll()}finally{this.cleanupAssistantStream()}}),this.assistantEventSource.addEventListener("error",()=>this.cleanupAssistantStream()),this.jobPollAttempt=0,this.pollJobStatus(e,t)},init(){if(!this.$refs.responses||this.$refs.responses.children.length)return;let e=this.$el?.dataset?.threadId;if(!e)return;let t="initial",n=this.createPlaceholder(t);this.$refs.responses.prepend(n),this.startEventStreams(e,t)},async regenerate(e){if(this.pending)return;let t=e?.currentTarget,n=t?.dataset?.threadId,r=t?.dataset?.model,s=t?.dataset?.promptContent;if(!n||!s)return;this.pending=!0;let a=Math.random().toString(36).slice(2,10),l=this.createPlaceholder(a);this.$refs.responses.prepend(l);try{let o=this.$refs.responses.querySelector(".message[data-uuid]")?.dataset?.uuid||null,i=await fetch("/v1/ask",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:s,thread_id:n,lens_id:this.$refs?.lensSelect?.value||void 0,model:r})});if(!i.ok)throw new Error(`Ask HTTP ${i.status}`);this.startEventStreams(n,a,{afterAssistantUuid:o})}catch(p){console.error("Error:",p);let o=this.$refs.responses.querySelector(`[data-temp-id="${a}"]`);o&&o.remove()}finally{this.pending=!1}}});function le(e,t){if(typeof e!="string")throw new TypeError("highlightCode expects a string");let n=Ae(e,t),r=[],s=[],a=[],l=[],p=[],o=c=>{if(!Number.isInteger(c)||c<0)throw new TypeError("encodeIndex expects a non-negative integer");let d="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",x=d.length,k=c,$="";do $=d[k%x]+$,k=Math.floor(k/x);while(k>0);return $},i=c=>`HLSTR${o(c)}`,u=c=>`HLCMT${o(c)}`,m=c=>`HLKW${o(c)}`,h=c=>`HLBI${o(c)}`,g=c=>`HLNUM${o(c)}`,v=c=>{let d="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",x=d.length,k=0;for(let $ of String(c)){let w=d.indexOf($);if(w===-1)throw new Error("Invalid placeholder encoding");k=k*x+w}return k},y=e;n==="python"?(y=y.replace(/#[^\n]*/g,c=>{let d=s.length;return s.push(c),u(d)}),y=y.replace(/'''[\s\S]*?'''|"""[\s\S]*?"""/g,c=>{let d=r.length;return r.push(c),i(d)}),y=y.replace(/'([^'\\]|\\.)*?'|"([^"\\]|\\.)*?"/g,c=>{let d=r.length;return r.push(c),i(d)})):n==="sql"?(y=y.replace(/--[^\n]*/g,c=>{let d=s.length;return s.push(c),u(d)}),y=y.replace(/'([^'\\]|\\.)*?'/g,c=>{let d=r.length;return r.push(c),i(d)})):(y=y.replace(/\/\/[^\n]*/g,c=>{let d=s.length;return s.push(c),u(d)}),y=y.replace(/\/\*[\s\S]*?\*\//g,c=>{let d=s.length;return s.push(c),u(d)}),y=y.replace(/'([^'\\]|\\.)*?'|"([^"\\]|\\.)*?"|`([^`\\]|\\.)*?`/g,c=>{let d=r.length;return r.push(c),i(d)})),y=J(y);let b=c=>c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),E=qe(n);if(E.length>0){let c=n==="sql"?"gi":"g",d=new RegExp(`\\b(${E.map(b).join("|")})\\b`,c);y=y.replace(d,x=>{let k=a.length;return a.push(x),m(k)})}let f=Ie(n);if(f.length>0){let c=n==="sql"?"gi":"g",d=new RegExp(`\\b(${f.map(b).join("|")})\\b`,c);y=y.replace(d,x=>{let k=l.length;return l.push(x),h(k)})}return y=y.replace(/\b\d+(\.\d+)?\b/g,c=>{let d=p.length;return p.push(c),g(d)}),y=y.replace(/\u0001HLSTR([A-Za-z]+)\u0001/g,(c,d)=>{let x=v(d),k=r[x];if(k===void 0)throw new Error("Invalid string placeholder index");return`<span class="hl-str">${J(k)}</span>`}),y=y.replace(/\u0001HLCMT([A-Za-z]+)\u0001/g,(c,d)=>{let x=v(d),k=s[x];if(k===void 0)throw new Error("Invalid comment placeholder index");return`<span class="hl-cmt">${J(k)}</span>`}),y=y.replace(/\u0001HLNUM([A-Za-z]+)\u0001/g,(c,d)=>{let x=v(d),k=p[x];if(k===void 0)throw new Error("Invalid number placeholder index");return`<span class="hl-num">${k}</span>`}),y=y.replace(/\u0001HLBI([A-Za-z]+)\u0001/g,(c,d)=>{let x=v(d),k=l[x];if(k===void 0)throw new Error("Invalid builtin placeholder index");return`<span class="hl-bi">${k}</span>`}),y=y.replace(/\u0001HLKW([A-Za-z]+)\u0001/g,(c,d)=>{let x=v(d),k=a[x];if(k===void 0)throw new Error("Invalid keyword placeholder index");return`<span class="hl-kw">${k}</span>`}),y}function J(e){if(typeof e!="string")throw new TypeError("escapeHtml expects a string");return e.replace(/[&<>"']/g,t=>t==="&"?"&amp;":t==="<"?"&lt;":t===">"?"&gt;":t==='"'?"&quot;":"&apos;")}function Ae(e,t){if(t){let n=t.toLowerCase();return n==="js"||n==="javascript"||n==="typescript"||n==="ts"?"javascript":n==="py"||n==="python"?"python":n==="sql"||n==="postgres"||n==="postgresql"||n==="mysql"?"sql":n==="go"||n==="golang"?"go":n==="rs"||n==="rust"?"rust":n==="sh"||n==="bash"||n==="shell"?"shell":n}return/\b(def|class)\s+\w+[\(:]/.test(e)?"python":/\b(const|let|var|function)\s+\w+/.test(e)?"javascript":/^\s*(SELECT|INSERT|UPDATE|DELETE|CREATE|ALTER|DROP)\b/mi.test(e)?"sql":/\bfn\s+\w+\(/.test(e)?"rust":/\bfunc\s+\w+\(/.test(e)?"go":"generic"}function qe(e){let t={python:["def","class","if","else","elif","for","while","return","import","from","as","try","except","finally","with","lambda","yield","async","await","raise","pass","break","continue","in","is","not","and","or"],javascript:["function","const","let","var","if","else","for","while","return","import","export","default","class","extends","async","await","yield","typeof","new","delete","this","super","static","try","catch","finally","throw","break","continue","switch","case"],sql:["SELECT","FROM","WHERE","JOIN","INNER","LEFT","RIGHT","OUTER","ON","INSERT","INTO","VALUES","UPDATE","SET","DELETE","CREATE","TABLE","ALTER","DROP","INDEX","ORDER","BY","GROUP","HAVING","LIMIT","OFFSET","AS","AND","OR","NOT","IN","LIKE","BETWEEN"],go:["func","package","import","var","const","type","struct","interface","if","else","for","range","return","defer","go","chan","select","case","switch","break","continue"],rust:["fn","let","mut","const","static","struct","enum","impl","trait","type","if","else","match","for","while","loop","return","break","continue","use","mod","pub","crate"],shell:["if","then","else","elif","fi","for","while","do","done","case","esac","function","return","exit","export","source"],generic:[]};return t[e]||t.generic}function Ie(e){let t={python:["True","False","None","self","str","int","float","bool","list","dict","tuple","set","len","range","print","open","type","isinstance","super","__init__","__name__"],javascript:["true","false","null","undefined","NaN","Infinity","console","window","document","Array","Object","String","Number","Boolean","Math","Date","Promise","JSON"],sql:["NULL","TRUE","FALSE","COUNT","SUM","AVG","MIN","MAX","DISTINCT","EXISTS"],go:["true","false","nil","make","new","len","cap","append","copy","delete","panic","recover"],rust:["true","false","None","Some","Ok","Err","Vec","String","Option","Result","println","panic"],shell:["echo","cd","ls","pwd","cat","grep","sed","awk","find","chmod","chown"],generic:["true","false","null","undefined"]};return t[e]||t.generic}function A(e){if(typeof e!="string")throw new TypeError("escapeHtml expects a string");return e.replace(/[&<>"']/g,t=>t==="&"?"&amp;":t==="<"?"&lt;":t===">"?"&gt;":t==='"'?"&quot;":"&#39;")}function C(e){if(typeof e!="string")throw new TypeError("parseInline expects a string");let t=[],n=[],r=[],s=p=>`ROSECODE${p}`,a=p=>`ROSELINK${p}`,l=p=>`ROSEAUTOLINK${p}`;return e=e.replace(/`([^`]*?)`/g,(p,o)=>{let i=t.length;return t.push(A(o)),s(i)}),e=e.replace(/\[([^\]]+)\]\(([^)]+)\)/g,(p,o,i)=>{let u=i.trim();if(!(/^(https?|mailto|tel):/i.test(u)||/^[/.#]/.test(u)))return o;let h=n.length,g=A(o),v=A(u);return n.push(`<a href="${v}" target="_blank" rel="noopener noreferrer">${g}</a>`),a(h)}),e=e.replace(/\bhttps?:\/\/[^\s<>"']+/g,p=>{let o=p,i="";for(;/[),.;:!?\\\]]$/.test(o);)i=o.slice(-1)+i,o=o.slice(0,-1);if(!o)return A(p);let u=r.length,m=A(o);return r.push(`<a href="${m}" target="_blank" rel="noopener noreferrer">${m}</a>${A(i)}`),l(u)}),e=A(e),e=e.replace(/\*\*([^*]+)\*\*/g,"<strong>$1</strong>"),e=e.replace(/__([^_]+)__/g,"<strong>$1</strong>"),e=e.replace(/\*([^*]+)\*/g,"<em>$1</em>"),e=e.replace(/_([^_]+)_/g,"<em>$1</em>"),e=e.replace(/\u0001ROSELINK(\d+)\u0001/g,(p,o)=>{let i=n[Number(o)];if(i===void 0)throw new Error("Invalid link placeholder index");return i}),e=e.replace(/\u0001ROSEAUTOLINK(\d+)\u0001/g,(p,o)=>{let i=r[Number(o)];if(i===void 0)throw new Error("Invalid auto-link placeholder index");return i}),e=e.replace(/\u0001ROSECODE(\d+)\u0001/g,(p,o)=>{let i=t[Number(o)];if(i===void 0)throw new Error("Invalid code placeholder index");return`<code>${i}</code>`}),e}function ce(e){if(typeof e!="string")throw new TypeError("markdownToHtml expects a string");let t=1e5;if(e.length>t){let b=e.slice(0,t),E=`<div class="markdown-error">Content exceeds ${t} characters, showing truncated...`;return E+=`</div><pre>${A(b)}</pre>`,E}e=e.replace(/\r\n?/g,`
`);let n=e.split(`
`),r="",s=!1,a=!1,l=!1,p=!1,o=[],i=[],u="",m=[];function h(){o.length>0&&(r+=`<p>${C(o.join(" "))}</p>
`,o=[])}function g(){l&&(r+=`<blockquote>${i.join(`<br />
`)}</blockquote>
`,i=[],l=!1)}function v(){if(!p)return;let b=m.join(`
`),E=u?` class="language-${A(u)}"`:"",f=le(b,u);r+=`<pre><code${E}>${f}</code></pre>
`,u="",m=[],p=!1}function y(){s&&(r+=`</ul>
`,s=!1),a&&(r+=`</ol>
`,a=!1)}for(let b=0;b<n.length;b++){let E=n[b],f=E.match(/^```([^\s`]+)?\s*$/);if(f){h(),y(),g(),p?v():(p=!0,u=(f[1]||"").trim(),m=[]);continue}if(p){m.push(E);continue}if(!E.trim()){h(),y(),g();continue}if(/^(\-\-\-|\*\*\*|___)\s*$/.test(E.trim())){h(),y(),g(),r+=`<hr />
`;continue}if(/^\s*>\s?/.test(E)){h(),y(),l||(l=!0);let k=E.replace(/^\s*>\s?/,"");i.push(C(k));continue}let c=E.match(/^(#{1,6})\s+(.*)$/);if(c){h(),y(),g();let k=c[1].length,$=c[2].trim();r+=`<h${k}>${C($)}</h${k}>
`;continue}let d=E.match(/^\s*(\d+)\.\s+(.*)$/);if(d){h(),g(),s&&(r+=`</ul>
`,s=!1),a||(r+=`<ol>
`,a=!0),r+=`<li>${C(d[2])}</li>
`;continue}let x=E.match(/^\s*[-*+]\s+(.*)$/);if(x){h(),g(),a&&(r+=`</ol>
`,a=!1),s||(r+=`<ul>
`,s=!0),r+=`<li>${C(x[1])}</li>
`;continue}g(),y(),o.push(E)}return v(),h(),y(),g(),r.trim()}document.addEventListener("alpine:init",()=>{if(!window.TRANSPORT?.search)throw new Error("TRANSPORT.search not found");Alpine.store("search",{...window.TRANSPORT.search,clearLens(){this.lens_id=""}}),Alpine.magic("markdown",()=>ce),Alpine.data("askButton",G),Alpine.data("responseMessage",X),Alpine.data("searchForm",Q),Alpine.data("lensToken",Y),Alpine.data("importPage",ue),Alpine.data("threadMessagesPage",oe)});})();
